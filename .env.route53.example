# Environment Variables for Route 53 DNS Automation

# Copy these variables to your .env file and fill in the appropriate values

# =====================================
# Route 53 DNS Automation Configuration
# =====================================

# Enable/disable Route 53 DNS automation
# Set to 'true' to enable automatic DNS record creation
# Set to 'false' to disable automation (manual DNS management)
ROUTE53_ENABLED=true

# Route 53 Hosted Zone ID for your domain
# Example: Z1D633PJN98FT9
# To find this: AWS Console > Route 53 > Hosted zones > junotech.in > Hosted zone details
ROUTE53_HOSTED_ZONE_ID=your_hosted_zone_id_here

# =====================================
# Custom Domain Configuration
# =====================================

# Enable custom domain support (should be 'true' for production)
CUSTOM_DOMAIN_ENABLED=true

# Base domain for tenant subdomains
# Tenants will get subdomains like: tenant123.junotech.in
CUSTOM_DOMAIN_BASE=junotech.in

# =====================================
# SSL Certificate Configuration
# =====================================

# AWS Certificate Manager (ACM) SSL Certificate ARN
# This should be a wildcard certificate for *.junotech.in
# Example: arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012
SSL_CERTIFICATE_ARN=your_ssl_certificate_arn_here

# =====================================
# AWS Configuration (Required)
# =====================================

# AWS credentials for Route 53 and CloudFront access
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# AWS region (us-east-1 required for CloudFront)
AWS_REGION=us-east-1

# =====================================
# Example Configuration
# =====================================

# Here's an example of how your .env should look:
# ROUTE53_ENABLED=true
# ROUTE53_HOSTED_ZONE_ID=Z1D633PJN98FT9
# CUSTOM_DOMAIN_ENABLED=true
# CUSTOM_DOMAIN_BASE=junotech.in
# SSL_CERTIFICATE_ARN=arn:aws:acm:us-east-1:123456789012:certificate/abcd1234-5678-90ef-ghij-klmnopqrstuv
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
# AWS_REGION=us-east-1

# =====================================
# Setup Steps
# =====================================

# 1. Create hosted zone in Route 53:
#    - Go to AWS Console > Route 53 > Hosted zones
#    - Create hosted zone for "junotech.in"
#    - Note the Hosted Zone ID and nameservers

# 2. Update domain nameservers:
#    - Go to your domain registrar (Hostinger)
#    - Update nameservers to point to Route 53 nameservers
#    - This change can take 24-48 hours to propagate

# 3. Request SSL certificate:
#    - Go to AWS Console > Certificate Manager
#    - Request public certificate for "*.junotech.in" and "junotech.in"
#    - Use DNS validation with Route 53
#    - Note the certificate ARN

# 4. Configure environment variables:
#    - Copy the values above to your .env file
#    - Replace placeholder values with actual values

# 5. Test the configuration:
#    - Create a test tenant
#    - Verify DNS record is created automatically
#    - Check SSL certificate is applied correctly

# =====================================
# Cost Information
# =====================================

# Route 53 costs:
# - Hosted zone: $0.50/month
# - DNS queries: $0.40 per million queries
# - SSL certificate: Free with ACM
# - Estimated monthly cost: $0.50-$2.00 for small apps

# =====================================
# Security Notes
# =====================================

# 1. AWS IAM Permissions Required:
#    - route53:ChangeResourceRecordSets
#    - route53:GetHostedZone
#    - route53:ListResourceRecordSets
#    - route53:GetChange
#    - cloudfront:CreateDistribution
#    - cloudfront:GetDistribution
#    - cloudfront:UpdateDistribution
#    - acm:ListCertificates
#    - acm:DescribeCertificate

# 2. Environment Security:
#    - Never commit .env files to version control
#    - Use AWS IAM roles instead of access keys in production
#    - Regularly rotate AWS access keys
#    - Use AWS Secrets Manager for production environments

# =====================================
# Troubleshooting
# =====================================

# Common issues:
# 1. "InvalidInput: RRSet with DNS name xxx already exists"
#    - DNS record already exists, check Route 53 console
#    - Delete existing record or use different tenant ID

# 2. "AccessDenied: User xxx is not authorized to perform yyy"
#    - Check AWS IAM permissions for Route 53
#    - Ensure AWS credentials are correct

# 3. "NoSuchHostedZone: No hosted zone found"
#    - Check ROUTE53_HOSTED_ZONE_ID value
#    - Verify hosted zone exists in Route 53

# 4. SSL certificate not working:
#    - Check SSL_CERTIFICATE_ARN is correct
#    - Verify certificate is validated and issued
#    - Ensure certificate covers *.junotech.in domain