# Environment Variables
NODE_ENV=development
PORT=8000

# Database (Supabase)
DATABASE_URL=postgresql://user:password@host:5432/database

# Redis (for job queue)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379

# JWT
JWT_SECRET=your_super_secret_jwt_key_here_change_in_production
JWT_EXPIRES_IN=7d

# AWS Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET_UPLOADS=user-app-codebase-uploads
AWS_S3_BUCKET_STATIC=user-app-static-sites-uploads
# Legacy bucket name for backward compatibility
S3_BUCKET_NAME=user-app-codebase-uploads
AWS_S3_BUCKET_NAME=user-app-codebase-uploads

# =============================================================================
# DEPLOYMENT STRATEGY CONFIGURATION (NEW)
# =============================================================================

# Default deployment strategy for new tenants
# Options: 'shared' (recommended) or 'individual'
DEFAULT_DEPLOYMENT_STRATEGY=shared

# Force all tenants to use specific strategy (useful for migrations)
# Leave empty for normal operation, set to 'shared' or 'individual' to override
FORCE_DEPLOYMENT_STRATEGY=

# Enable individual distributions for enterprise tiers
# Set to 'true' to allow enterprise tenants to use individual distributions
ENABLE_INDIVIDUAL_FOR_ENTERPRISE=true

# Maximum number of individual distributions allowed (AWS quota management)
# CloudFront has a default limit of 500 distributions per account
MAX_INDIVIDUAL_DISTRIBUTIONS=400

# Current count of individual distributions (for quota tracking)
CURRENT_DISTRIBUTION_COUNT=0

# =============================================================================
# SHARED CLOUDFRONT DISTRIBUTION CONFIGURATION (NEW)
# =============================================================================

# Shared CloudFront distribution domain (without https://)
# This is the CloudFront domain that will serve all tenants
# Example: d1234567890.cloudfront.net
SHARED_CLOUDFRONT_DOMAIN=

# Shared CloudFront distribution ID
# Used for cache invalidation and management
SHARED_CLOUDFRONT_DISTRIBUTION_ID=

# =============================================================================
# DNS CONFIGURATION (NEW)
# =============================================================================

# Enable Route 53 DNS automation
# Set to 'true' to automatically create DNS records for tenant subdomains
ROUTE53_ENABLED=true

# Route 53 hosted zone ID for custom domain management
# This is the hosted zone where tenant subdomains will be created
ROUTE53_HOSTED_ZONE_ID=

# Custom domain base for tenant subdomains
# Tenant subdomains will be created as: {tenant-id}.{CUSTOM_DOMAIN_BASE}
# Example: tenant123.junotech.in
CUSTOM_DOMAIN_BASE=junotech.in

# =============================================================================
# TENANT CONFIGURATION (NEW)
# =============================================================================

# Default tenant tier for new tenants
DEFAULT_TENANT_TIER=standard

# Comma-separated list of tenant IDs that should be treated as enterprise
# These tenants will be eligible for individual distributions if enabled
ENTERPRISE_TENANT_IDS=

# Email (SMTP Configuration)
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=587
SMTP_USER=your_email@yourdomain.com
SMTP_PASSWORD=your_email_password
EMAIL_SERVICE=hostinger
EMAIL_FROM=noreply@yourdomain.com

# App Configuration
BASE_DOMAIN=http://localhost:3000
API_BASE_URL=http://localhost:8000
FRONTEND_BASE_URL=http://localhost:3000
APP_NAME=Website Builder

# Security
BCRYPT_SALT_ROUNDS=12
MAX_UPLOAD_SIZE=100mb
ALLOWED_UPLOAD_TYPES=.zip

# Build Configuration
BUILD_TIMEOUT=900000
MAX_CONCURRENT_BUILDS=3

# Monitoring
SENTRY_DSN=your_sentry_dsn_here
LOG_LEVEL=info

# =============================================================================
# SHARED DISTRIBUTION SETUP NOTES
# =============================================================================
# 
# To enable shared CloudFront distribution:
# 1. Create a CloudFront distribution with S3 origin pointing to AWS_S3_BUCKET_STATIC
# 2. Set SHARED_CLOUDFRONT_DOMAIN and SHARED_CLOUDFRONT_DISTRIBUTION_ID above
# 3. Deploy the CloudFront Function (src/cloudfront/tenant-routing-function.js)
# 4. Associate the function with viewer-request event in CloudFront distribution
# 5. Set up wildcard SSL certificate for *.junotech.in (or your domain)
# 6. Configure Route 53 hosted zone if using custom domains
#
# Cost Comparison:
# - Individual: 500 distributions × $1/month = $500/month + bandwidth costs
# - Shared: 1 distribution × $1/month = $1/month + bandwidth costs
# - Savings: 99.8% reduction in CloudFront base costs
#
# Scalability:
# - Individual: Limited to AWS quotas (500-5000 distributions max)
# - Shared: Unlimited tenants (limited only by bandwidth and requests)
#
# Example tenant URLs:
# - Shared: https://tenant123.junotech.in
# - Individual: https://tenant123.junotech.in (same URL, different backend)
# - S3 Fallback: https://bucket.s3.amazonaws.com/tenants/tenant123/deployments/current/
